# 034 - There are few types of elements（★4）

## テーマ: 単調性を利用した尺取り法

## 解法

まず, i = 1,2,...,N について以下のような値を高速に求めることを考える.

```
K 種類以下の値からなる部分列 a[i],a[i+1],...,a[r] があって, r が最大になるものにおける r の値 c[i]
```

例えば `a = (3,1,2,4,4,3,1,3), K = 3` の場合, 以下のようになる.

<table>
	<thead>
		<tr>
			<th>i</th>
			<th>1</th>
			<th>2</th>
			<th>3</th>
			<th>4</th>
			<th>5</th>
			<th>6</th>
			<th>7</th>
			<th>8</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<th>c[i]</th>
			<td>3</td>
			<td>5</td>
			<td>6</td>
			<td>8</td>
			<td>8</td>
			<td>8</td>
			<td>8</td>
			<td>8</td>
		</tr>
	</tbody>
</table>

ここで, 重要な性質として**単調性** `c[1] ≤ c[2] ≤ ... ≤ c[N]` が成り立つ.

そこで, 以下のようなアルゴリズムを考える.

1. 最初 r = 1 とし, K 種類を超えないギリギリまで r を増やす
1. c[i] の値が求まったら, i の値を 1 増やす

すると, "見ている区間を 1 増やす or 1 減らす" 操作を合計 2N 回しか行わずに済む. このような手法を **尺取り法 (two pointer approach)** とよぶ.
